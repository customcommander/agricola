{
  "context": {
    "turn": 0,
    "workers": 2
  },
  "initial": "init",
  "states": {
    "init": {
      "after": {
        "200": "new_turn"
      }
    },
    "new_turn": {
      "entry": "setup_turn",
      "after": {
        "200": "work"
      }
    },
    "work": {
      "initial": "select_task",
      "states": {
        "select_task": {
          "after": {
            "200": {
              "target": "perform_task",
              "actions": "allocate_worker"
            }
          }
        },
        "perform_task": {
          "after": {
            "200": [
              {
                "target": "select_task",
                "guard": "has_workers"
              },
              {
                "target": "done"
              }
            ]
          }
        },
        "done": {
          "type": "final"
        }
      },
      "onDone": [
        {
          "target": "harvest",
          "guard": "is_harvest_time"
        },
        {
          "target": "new_turn"
        }
      ]
    },
    "harvest": {
      "initial": "fields",
      "states": {
        "fields": {
          "after": {
            "200": "feed"
          }
        },
        "feed": {
          "after": {
            "200": "breed"
          }
        },
        "breed": {
          "after": {
            "200": "done"
          }
        },
        "done": {
          "type": "final"
        }
      },
      "onDone": [
        {
          "target": "game_over",
          "guard": "is_last_turn"
        },
        {
          "target": "new_turn"
        }
      ]
    },
    "game_over": {
      "type": "final"
    }
  }
}
